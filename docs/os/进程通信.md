# 进程通信 IPC

管道 pile
有名管道 FIFO
套接字 socket
消息队列me
信号量 Semaphore
信号 signal

共享内存 **最快** 常配合其他通信机制使用，如：信号量，

## 管道
实质: **内核缓存区**, 读写双指针循环队列

管道通信方式的**中间介质是文件**，通常称这种文件为管道文件。两个进程利用管道文件进行通信时，一个

管道是一种**半双工**的通信方式，数据只能**单向流动**，而且只能在具有亲缘关系的进程间使用。进程的亲缘关系通常是指父子进程关系。

管道只能承载无格式字节流以及缓冲区大小受限

读

### 有名管道
有名管道**不限于父子进程通信**
一个有名管道文件，通常称为有名管道或FIFO。

mknod()或makefifo()生成
有节点 无数据块： 内存释放时， 磁盘节点仍然存在

## 消息队列
不限进程
有消息类型分类，自定义接收条件，**按消息类型的优先队列**

msgget、
msgsend
msgrcv
msgctl

## 信号量
计数器
原子操作
锁机制
同步，主要作为进程间以及同一进程内不同线程之间的同步手段。

## 信号
<signal.h>
通知接收进程某个事件已经发生。

## 2种来源
信号是在软件层次上对中断机制的一种模拟，是一种异步通信方式，信号可以在用户空间进程和内核之间直接交互。内核也可以利用信号来通知用户空间的进程来通知用户空间发生了哪些系统事件。信号事件有两个来源：
1）硬件来源，例如按下了cltr+C，通常产生中断信号sigint

2）软件来源，例如使用系统调用或者命令发出信号。最常用的发送信号的系统函数是kill,raise,setitimer,sigation,sigqueue函数。软件来源还包括一些非法运算等操作。

### 三种处理
一旦有信号产生，用户进程对信号产生的相应有三种方式：

1）执行默认操作，linux对每种信号都规定了默认操作。

2）捕捉信号，定义信号处理函数，当信号发生时，执行相应的处理函数。

3）忽略信号，当不希望接收到的信号对进程的执行产生影响，而让进程继续执行时，可以忽略该信号，即不对信号进程作任何处理
## 共享内存
两种机制
 - 内存映射
[[mmap]]
munmap
 - 内存共享机制
shmget
shmat
shmadt