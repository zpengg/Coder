# 三色标记
[[CMS]] [[G1]] 并发标记过程

## 流程
```
for each 灰子(白) ->灰
灰 -> 黑
```

## 漏标问题
并发过程中
- + 黑->白
- - 灰->白

### 解决漏标问题
两种方法：
 - 跟踪黑指向白的增加 incremental update：增量更新，关注引用的增加，把黑色重新标记为灰色，下次重新扫描属性。CMS采用该方法。 
 - 记录灰指向白的消失 [[SATB]] snapshot at the beginning：关注引用的删除，当灰–>白消失时，要把这个引用 推到GC的堆栈，保证白还能被GC扫描到。G1采用该方法。


