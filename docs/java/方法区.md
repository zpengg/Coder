# 方法区 （non-heap）
方法区（method area）只是 JVM 规范中定义的一个概念
 - 存储类信息
 - [[运行时常量池]]
 - 静态变量
 - [[JIT]]编译后的代码

## 元数据
类型信息、字段、方法、常量


-XX:PermSize 和 -xx:MaxPermSize
-XX:MetaspaceSize 和 -XX:MaxMetaspaceSize

## 与堆的关系
逻辑上是堆的一部分，物理实现没规定

### 实现历史： 永久代 -> 元空间
JDK7- 永久代，部分 [[垃圾回收器]] 进行 Full GC 可操作这部分空间
JDK7 永久代, 字符串常量池、静态变量移除到堆中
JDK8 元空间，类的**元数据**在堆外内存，不受垃圾回收器管理. 

相当于永久代的数据被分到了堆和元空间中

### 永久代 的缺点
- 类及方法的信息等比较**难确定其大小**，因此对于永久代的大小指定比较困难，太小容易出现永久代溢出，太大则容易导致老年代溢出。
- 永久代会为 GC 带来不必要的复杂度，并且回收效率偏低。
- 动态加载过多容易 OOM，放本地内存空间更大
- 难调优

## 与栈的关系
```java
方法区 栈   堆
Person p = new Person();

堆.实例 --类型指针--> 方法区.对象类型数据
```

编译期间将 
运行期间也可以将新的常量放入池中

[[方法区 GC]]